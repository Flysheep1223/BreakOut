## 📂 项目架构

本项目模块化为多个 Prolog 文件，每个文件负责特定的功能：

### 1. `main.pl` (入口点)
- **作用**: 应用程序的主入口。
- **功能**: 加载必要的模块 (`game_engine.pl`) 并提供 `play/0` 谓词来启动游戏。

### 2. `game_engine.pl` (核心逻辑)
- **作用**: 管理游戏状态和规则的核心引擎。
- **主要特性**:
  - **状态管理**: 跟踪动态谓词，如玩家位置、生命值、游戏结束状态和地图片段。
  - **地图加载**: 动态加载关卡文件（例如 `level1.pl`）并生成墙壁结构。
  - **移动与物理**: 处理玩家移动 (WASD)、墙壁碰撞检测和传送门机制。
  - **游戏循环**: 管理主输入循环并触发 AI 更新。
  - **调试工具**: 包含 `tp(X, Y)` 用于传送。

### 3. `ai_chaser.pl` (AI 逻辑)
- **作用**: 控制敌人“追逐者 (Chaser)”的行为。
- **算法**: 使用 **广度优先搜索 (BFS)** 的纯 Prolog 实现来寻找通往玩家的最短路径。
- **行为**:
  - 每次玩家移动时更新其位置。
  - 智能地绕过墙壁导航。
  - 与玩家接触时触发“游戏结束”。

### 4. `level1.pl` (数据 / 地图)
- **作用**: 定义第一关的具体配置。
- **内容**:
  - `map_size/2`: 地图尺寸。
  - `spawn_pos/2` & `exit_pos/2`: 起始位置和胜利位置。
  - `map_segment/2`: 用于生成墙壁的坐标。
  - `health_zone/4`: 玩家恢复生命值的区域。
  - `portal_pos/3`: 触发地图切换的位置（如果已配置）。

## 🚀 快速运行

1. 启动 Prolog: swipl
2. 加载主文件: ['main.pl']
3. 开始游戏: play.

## 🎮 控制

- **W / A / S / D**: 上 / 左 / 下 / 右 移动。
- **Q**: 退出游戏。
- **tp(X, Y)**: (调试) 传送到坐标 (X, Y)。


